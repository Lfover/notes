# é¡¹ç›®ç¬”è®°



é¡¹ç›®ç›®çš„

äº†è§£é¡¹ç›®æƒ³å®ç°ä»€ä¹ˆåŠŸèƒ½

ä¸šåŠ¡åŠŸèƒ½

> 1.æµè§ˆå™¨å¯ä»¥è®¿é—®å½“å‰åœ¨çº¿ojå½“ä¸­çš„æ‰€æœ‰é¢˜ç›®ï¼Œè·å–é¢˜ç›®çš„åˆ—è¡¨
>
> 2.ç‚¹å¼€ä»»æ„ä¸€ä¸ªé¢˜ç›®ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½œç­”
>
> 3.ç¼–è¯‘ç”¨æˆ·æäº¤çš„ä»£ç ï¼Œå¹¶ä¸”è¿”å›æ‰§è¡Œç»“æœ





> åœ¨çº¿ojé¡¹ç›®ï¼Œæ”¯æŒæŸ¥çœ‹é¢˜ç›®åˆ—è¡¨
>
> æ”¯æŒç‚¹å‡»å•ä¸ªé¢˜ç›®
>
> æ”¯æŒä»£ç å—ä¹¦å†™ä»£ç 
>
> æ”¯æŒæäº¤ä¹¦å†™çš„ä»£ç åˆ°åç«¯
>
> æ”¯æŒåç«¯ç¼–è¯‘è¿è¡Œ
>
> æ”¯æŒè¿”å›ç»“æœ

## é¡¹ç›®æ¨¡å—åˆ’åˆ†

1.1 å¤§æ¦‚çš„æ¨¡å‹

b/sï¼šæµè§ˆå™¨+æœåŠ¡ç«¯æ¨¡å‹

è¯·æ±‚æ•°æ®ä»æµè§ˆå™¨ä¸­æ¥

æœåŠ¡ç«¯å¤„ç†å®Œæ¯•åï¼Œå“åº”è¿”å›ç»™æµè§ˆå™¨

1.2åˆ’åˆ†æœåŠ¡ç«¯æ¨¡å—

> èƒ½å¤Ÿå¤„ç†æµè§ˆå™¨å‘è¿‡æ¥çš„è¯·æ±‚ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¤„ç†è¯·æ±‚ï¼Œæ¢å¤ä¸€ä¸ªå“åº”

![image-20220326102947360](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326102947360.png)

* httpæ¨¡å—ï¼šæ¥æ”¶æµè§ˆå™¨çš„è¯·æ±‚+å‘é€å“åº”ï¼Œä½¿ç”¨å¼€æºåº“cpp-httplib
* è¯•é¢˜æ¨¡å—ï¼šç®¡ç†æ‰€æœ‰çš„ojè¯•é¢˜ï¼Œæœ¬è´¨ä¸Šæœ‰ä¸¤ç§ç­–ç•¥æ¥è¿›è¡Œç®¡ç†ï¼Œ1.ä¸€ç­–ç•¥æ˜¯å°†è¯•é¢˜å†™åˆ°æ–‡ä»¶å½“ä¸­ï¼ŒæœåŠ¡å™¨ä»æ–‡ä»¶å½“ä¸­è¯»å›æ¥ï¼›2.ä¸€ç§ç­–ç•¥æ˜¯å°†è¯•é¢˜ä¿å­˜åœ¨æ•°æ®åº“å½“ä¸­ï¼ŒæœåŠ¡ç«¯æ¯æ¬¡å»æ•°æ®åº“å½“ä¸­æŸ¥è¯¢
* ç¼–è¯‘è¿è¡Œæ¨¡å—ï¼šå¤„ç†æµè§ˆå™¨æäº¤çš„ä»£ç ï¼Œç¼–è¯‘+è¿è¡Œ
* å·¥å…·æ¨¡å—ï¼šæä¾›æ—¶é—´æˆ³ï¼Œ æä¾›æ—¥å¿—ï¼Œ æä¾›å­—ç¬¦ä¸²æ–¹æ³•

### httpæ¨¡å—

#### è·å–è¯·æ±‚

1.è·å–æ•´ä¸ªè¯•é¢˜åˆ—è¡¨çš„è¯·æ±‚ï¼Œhttpè¯·æ±‚ï¼Œä½¿ç”¨getæ–¹æ³•

2.è·å–å•ä¸ªè¯•é¢˜è¯·æ±‚ã€‚httpè¯·æ±‚ï¼Œä½¿ç”¨getæ–¹æ³•

3.åƒæœåŠ¡å™¨æäº¤ä»£ç çš„è¯·æ±‚ï¼Œä½¿ç”¨postæ–¹æ³•ï¼Œå‘æœåŠ¡å™¨æäº¤å†™çš„ä»£ç 

#### å›å¤å“åº”

### è¯•é¢˜æ¨¡å—

1.æŒ‰ç…§ä»€ä¹ˆæ ¼å¼ä¿å­˜è¯•é¢˜

â€‹	è¯•é¢˜æ–‡ä»¶å¤¹

> header.cpp:ä¿å­˜å¤´æ–‡ä»¶
>
> desc.txt:é¢˜ç›®çš„æè¿°
>
> tail.cpp:æ–‡ä»¶æœ«å°¾åŒ…å«æµ‹è¯•ç”¨ä¾‹ï¼Œä»¥åŠè°ƒç”¨é€»è¾‘

### ç¼–è¯‘è¿è¡Œæ¨¡å—

1.æµè§ˆå™¨æäº¤çš„ä»£ç æ˜¯æ²¡æœ‰mainå‡½æ•°è°ƒç”¨çš„ã€‚å°†codeå’Œtail.cppåˆå¹¶æˆæ–°çš„srcæ–‡ä»¶

2.ç¼–è¯‘æ¨¡å—è¿›è¡Œç¼–è¯‘ï¼Œä»€ä¹ˆæ ·çš„æŠ€æœ¯æ¥ç¼–è¯‘æºç æ–‡ä»¶ï¼Œè¿›ç¨‹ç¨‹åºæ›¿æ¢ï¼Œæ›¿æ¢æˆg++æ¥ç¼–è¯‘æºç ç¨‹åº ï¼Œå¦‚æœåœ¨çˆ¶è¿›ç¨‹æ—¶å°±æ›¿æ¢äº†ï¼ŒæœåŠ¡ç«¯åªæœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œå°±ä¼šä¸èƒ½å†æ¥æ”¶å…¶ä»–æµè§ˆå™¨çš„è¯·æ±‚äº†

å› æ­¤è¦å…ˆåšå­è¿›ç¨‹åˆ›å»ºï¼Œå­è¿›ç¨‹ç¨‹åºæ›¿æ¢

3.è¿è¡Œ

åˆ›å»ºå­è¿›ç¨‹ï¼Œä½¿ç”¨ç¨‹åºæ›¿æ¢

å­è¿›ç¨‹æ›¿æ¢æˆä¸ºç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œç¨‹åº

4.æ„é€ ç»“æœ

ç¼–è¯‘æˆåŠŸï¼Ÿ

è¿è¡ŒæˆåŠŸï¼Ÿ

å†…éƒ¨é”™è¯¯ï¼Ÿ

5.è¿”å›ç»“æœ

> å­˜åœ¨æµè§ˆå™¨è¯·æ±‚çš„å‚æ•°ä¸ºç©ºï¼Œæˆ–è€…ç†è§£ä¸ºå‚æ•°é”™è¯¯
>
> 2.å†…éƒ¨é”™è¯¯
>
> å†™æ–‡ä»¶é”™äº†ï¼Œ
>
> è¿›ç¨‹ç¨‹åºæ›¿æ¢å¤±è´¥
>
> å†…å­˜è®¿é—®é”™è¯¯
>
> 3.ç¼–è¯‘é”™è¯¯
>
> 4.è¿è¡Œé”™è¯¯
>
> ä¸ç¬¦åˆæµ‹è¯•ç”¨ä¾‹

6.ç»Ÿä¸€è¿”å›é£æ ¼

> 1.è¿”å›ç 
>
> å‚æ•°é”™è¯¯
>
> å†…éƒ¨é”™è¯¯
>
> ç¼–è¯‘é”™è¯¯
>
> è¿è¡Œé”™è¯¯
>
> ok
>
> 2.è¿”å›ç»“æœ
>
> parm error
>
> internal error
>
> compile error
>
> run error
>
> ok

# ç¯å¢ƒæ­å»º

## 1.cpp-httplib,å¼€æºåº“

ä½¿ç”¨æ–¹æ³•ï¼Œä»£ç å½“ä¸­ç›´æ¥åŒ…å«httplib.h

https://gitee.com/iqxg/cpp-httplib?from=gitee search

## 2.å‡çº§gcc

1.æ›´æ–°gccçš„æ–¹æ³•

å…ˆæŸ¥çœ‹è‡ªå·±çš„gccæ˜¯ä»€ä¹ˆç‰ˆæœ¬

![image-20220311144713561](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311144713561.png)





![image-20220311144747152](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311144747152.png)





> é¦–å…ˆåˆ‡æ¢åˆ°rootç”¨æˆ·
>
> ![image-20220311144828635](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311144828635.png)
>
> å…¶æ¬¡æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤
>
> ```
> yum -y install centos-release-scl
> ```
>
> ```
> yum -y install devtoolset-7-gcc devtoolset-7-gcc-c++ devtoolset-7-binutils
> ```
>
> åœ¨æ‰“å¼€å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹çš„bash_profile
>
> ```
> vim ~/.bash_profile
> ```
>
> æ‰“å¼€ä»¥ååœ¨æœ€åæ·»åŠ ä¸€å¥è¯ï¼Œç„¶åä¿å­˜é€€å‡º
>
> ```
> scl enable devtoolset-7 bash
> ```
>
> 

> ![image-20220311144607571](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311144607571.png)
>
> æœ€åä¸€æ­¥
>
> æ‰§è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼Œä½¿åˆšåˆšçš„ä¿®æ”¹ç”Ÿæ•ˆï¼Œå°±æ›´æ–°å®Œæˆäº†
>
> ```
> source ~/.bash_profile
> ```
>
> å†ä¸€æ¬¡ä½¿ç”¨gcc -v æŸ¥çœ‹
>
> ![image-20220311145651034](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311145651034.png)

## 3.å®‰è£…jsoncpp

åˆ‡æ¢åˆ°rootç”¨æˆ·æ‰§è¡Œ

```
yum install jsoncpp
```

```
yum install jsoncpp-devel
```

## 4.å®‰è£…boostç¯å¢ƒ,ctemplate

https://gitee.com/HGtz2222/ThirdPartLibForCpp



å®‰è£…æ­¥éª¤ï¼ˆåªæ”¯æŒcentos7 x86_64)

```
sudo yum install -y snappy-devel boost-devel zlib-devel.x86_64 python-pip
```

![image-20220311155458095](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311155458095.png)

```
sudo pip install BeautifulSoup4
```

```
git clone https://gitee.com/HGtz2222/ThirdPartLibForCpp.git
```

```
cd ./ThirdPartLibForCpp/el7.x86_64/
```

```
sh install.sh
```

ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™å°æ’æ›²ï¼Œæˆ‘æ²¡æœ‰pip,éœ€è¦å®‰è£…ä¸€ä¸ª

![image-20220311155603411](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311155603411.png)

å®‰è£…æ­¥éª¤

æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤

```
yum install python-pip
```

![image-20220311155729268](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311155729268.png)

æç¤ºæˆ‘æ²¡æœ‰å¯ç”¨ çš„åŒ…

æ¥ä¸‹æ¥æ‰§è¡Œ

```
yum -y install epel-release
```

![image-20220311155940183](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311155940183.png)

å†æ‰§è¡Œ

```
yum install python-pip
```

![image-20220311160101865](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311160101865.png)

æœ€åä¸€æ­¥ï¼Œå‡çº§

```
pip install --upgrade pip
```

![image-20220311160204512](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220311160204512.png)

ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™

# æµ‹è¯•httplib-demo

1.æ‰“å¼€ç äº‘å½“ä¸­çš„cpp-httplibé“¾æ¥

ä¸‹è½½httplib.h

æˆ‘ç”¨çš„æ˜¯è¿™ä¸ªå¼€æºåº“ï¼Œä»…ä¾›å‚è€ƒ[httplib]([iqxg/cpp-httplib - ç äº‘ - å¼€æºä¸­å›½ (gitee.com)](https://gitee.com/iqxg/cpp-httplib?from=gitee search))

ä¸‰ä¸ªæ–‡ä»¶

>1.bin æ”¾å¯æ‰§è¡Œç¨‹åºçš„æ–‡ä»¶å¤¹+é…ç½®æ–‡ä»¶çš„
>
>2.code æºç ç›®å½•
>
>3.test æµ‹è¯•ç›®å½•
>
>httplib,å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªhttpæœåŠ¡,ä¸éœ€è¦å…³å¿ƒtcpå’Œhttpçš„è§£æè¿‡ç¨‹ï¼Œè§£æå®Œæ¯•httpè¯·æ±‚ä¹‹åï¼Œä¼šæŒ‰ç…§è¯·æ±‚çš„æ–¹æ³•ï¼Œï¼Œæ‰¾åˆ°ç¨‹åºå½“ä¸­å¯¹åº”çš„æ¥å£ï¼Œè¿›è¡Œå¤„ç†
>
>* å¦‚æœæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œåˆ™å›è°ƒæ¥å£
>* å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„å¤„ç†æ–¹æ³•ï¼Œåˆ™ä¸å¤„ç†





ä¾èµ–class Serverç±»æ¥åˆ›å»ºhttpæœåŠ¡

![image-20220326093901442](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326093901442.png)

serverç±»çš„å›è°ƒå‡½æ•°

> å‡½æ•°åå­—ï¼Œå°±æ˜¯å½“å‰æ³¨å†Œå›è°ƒå‡½æ•°çš„æ–¹æ³•
>
> * å‡½æ•°åå­—æ˜¯getè¡¨ç¤ºæˆ‘ä»¬å¯ä»¥å¤„ç†getæ–¹æ³•çš„è¯·æ±‚
> * å‡½æ•°åå­—æ˜¯postä¾¿hiæˆ‘ä»¬å¯ä»¥å¤„ç†postè¯·æ±‚

ä¹Ÿéœ€è¦åœ¨æŒ‡å®šä¾¦å¬ipå’Œç«¯å£

![image-20220326094439563](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326094439563.png)



æµ‹è¯•httplib

åœ¨codeä¸‹ç¼–å†™ä¸€ä¸ªtest.cpp

```c++
    #include <stdio.h>
  2 #include "httplib.h"
  3 
  4 //å›è°ƒå‡½æ•°
  5 //Requestå’ŒResponseéƒ½æ˜¯åœ¨httplib.hä¸­å®šä¹‰çš„ï¼Œå› æ­¤åŠ ä¸Šhttplib::
  6 void func(const httplib::Request& req, httplib::Response& resp)
  7 {
 11     printf("recv abc\n ");
 12 }
 13 int main()
 14 {
 15     //åˆ›å»ºhttplibå½“ä¸­çš„severç±»å¯¹è±¡ï¼Œä½¿ç”¨è¯¥ç±»å¯¹è±¡ï¼Œæ¨¡æ‹Ÿåˆ›å»ºä¸€ä¸ªhttpæœåŠ¡å™¨
 16     httplib::Server svr;
 17     svr.Get("/abc",func);
 18     //ç›‘å¬
 19     svr.listen("0.0.0.0", 18989);
 20 
 21     return 0;
 22 }

```



![image-20220326100640284](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326100640284.png)

![image-20220326100717384](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326100717384.png)



å¦‚æœä½ ä¹Ÿæ˜¯ä¸Šé¢è¿™æ ·çš„ç»“æœï¼Œå°±è¯æ˜ä½ çš„httplibå·²ç»ğŸ†—äº†

ä½†æ˜¯æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­çœ‹ä¸åˆ°ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨set_contentç»™å“åº”ä½“ä¸€ä¸ªè¿”å›å€¼

åœ¨ä»£ç ä¸­åŠ ä¸Š

```c++ 
resp.set_content("<html>99</html, 15, "text/html");
```

```c++ 
 #include <stdio.h>
  2 #include "httplib.h"
  3 
  4 //å›è°ƒå‡½æ•°
  5 //Requestå’ŒResponseéƒ½æ˜¯åœ¨httplib.hä¸­å®šä¹‰çš„ï¼Œå› æ­¤åŠ ä¸Šhttplib::
  6 void func(const httplib::Request& req, httplib::Response& resp)
  7 {
  8     //ç»™å“åº”ä½“ä¸€ä¸ªè¿”å›å€¼
  9     resp.set_content("<html>99</html>", 15, "text/html");
 10 
 11     printf("recv abc\n ");
 12 }
 13 int main()
 14 {
 15     //åˆ›å»ºhttplibå½“ä¸­çš„severç±»å¯¹è±¡ï¼Œä½¿ç”¨è¯¥ç±»å¯¹è±¡ï¼Œæ¨¡æ‹Ÿåˆ›å»ºä¸€ä¸ªhttpæœåŠ¡å™¨
 16     httplib::Server svr;
 17     svr.Get("/abc",func);
 18     //ç›‘å¬
 19     svr.listen("0.0.0.0", 18989);
 20 
 21     return 0;
 22 }

```

å°±å¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°

![image-20220326102455526](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326102455526.png)

![image-20220326161936993](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220326161936993.png)

åˆ°è¿™é‡Œå°±æµ‹è¯•å®Œæ¯•äº†









![image-20220312115010424](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220312115010424.png)

æµè§ˆå™¨

> 1.é€šé…æ‰€æœ‰çš„æäº¤ä»£ç çš„è¯·æ±‚ï¼ˆç”¨æ­£åˆ™è§£å†³äº†ï¼‰
>
> 2.è·å–æäº¤çš„è¯•é¢˜ç¼–å·ï¼Œæ˜¯ä¸ºäº†æ‰¾åˆ°é¢˜ç›®çš„æµ‹è¯•ç”¨ä¾‹ä»¥åŠä»£ç é€»è¾‘è°ƒç”¨ï¼Œå°†æäº¤çš„ä»£ç å’Œtail.cppåˆå¹¶ï¼Œä¸ºç¼–è¯‘ä»£ç æ‰“åŸºç¡€
>
> 3.éœ€è¦å¯¹æäº¤çš„ä»£ç è¿›è¡Œdecodeè§£ç 
>
> 4.åˆå¹¶ä»£ç 
>
> 5.ç¼–è¯‘&è¿è¡Œ
>
> 6.å›å¤å“åº”

 jsonæ˜¯ä¸€ç§æ•°æ®ç»„ç»‡æ ¼å¼

jsonå¯¹è±¡ï¼š a = {key:value, key 1:value1, key2:value2}

jsonæ•°ç»„ï¼š[1,2,3 4,5 ,6]



å½“å‰è¿™ä¸ªé¡¹ç›®æ”¯æŒé«˜å¹¶å‘å—

æ”¯æŒ

cpp-httplibåº“ä¸­ç”¨åˆ°äº†select+å¤šçº¿ç¨‹

åœ¨ojé¡¹ç›®ä¸­æœ‰æ²¡æœ‰ä¿è¯çº¿ç¨‹å®‰å…¨

![image-20220401084540301](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220401084540301.png)

è¿è¡Œæ¨¡å—

> 1.å­è¿›ç¨‹éæ­£å¸¸é€€å‡º
>
> è®¿é—®ç©ºæŒ‡é’ˆï¼Œå†…å­˜è®¿é—®è¶Šç•Œï¼Œé‡å¤é‡Šæ”¾
>
> ==éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ªå¼‚å¸¸ä¿¡å·==
>
> çˆ¶è¿›ç¨‹è¿›ç¨‹ç­‰å¾…è·å–åˆ°å­è¿›ç¨‹é€€å‡ºçš„ä¿¡å·
>
> 2.å­è¿›ç¨‹æ­£å¸¸é€€å‡ºäº†
>
> 2.1æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡äº†stdout
>
> 2.2æµ‹è¯•ç”¨ä¾‹æ²¡æœ‰å…¨éƒ¨é€šè¿‡stderr
>
> ä»¥ä¸Šä¸¤ç§æƒ…å†µé‡å®šå‘åˆ°æ–‡ä»¶å½“ä¸­ 





![image-20220401084655988](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220401084655988.png)



















![](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220330195022675.png)

![image-20220330195031426](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220330195031426.png)

![image-20220330195034239](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220330195034239.png)







<img  src="C:\Users\86134\Pictures\Camera Roll\jl.jpeg" width = 12% height = 12% align = right>



![image-20220401225940520](C:\Users\86134\AppData\Roaming\Typora\typora-user-images\image-20220401225940520.png)









